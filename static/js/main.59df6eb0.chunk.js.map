{"version":3,"sources":["components/Header/assets/images/logout.png","components/Header/index.jsx","components/Login/index.jsx","components/Chat/MessagesList/index.jsx","components/Chat/WriteMessage/index.jsx","components/Chat/index.jsx","components/App.jsx","serviceWorker.js","index.js"],"names":["module","exports","Header","logOutHandler","e","target","classList","contains","_this","props","logOut","status","concat","this","chatStatus","greeting","content","user","react_default","a","createElement","Fragment","className","onClick","title","src","require","alt","Component","Login","state","value","changeHandler","setState","submitHandler","preventDefault","replace","length","logIn","components_Header","onSubmit","type","onChange","placeholder","maxLength","autoFocus","required","MessagesList","messagesContainer","React","createRef","updateScroll","current","scrollTop","scrollHeight","buttonClickHandler","loadMoreMessages","arr","map","i","key","id","from","moment","time","format","message","refactoredMessages","getMessages","messages","button","loadMoreButton","ref","WriteMessage","keyDownHandler","keyCode","sendMessage","onKeyDown","rows","Chat","allMessages","lastMessages","webSocket","autoReconnect","tabNotification","messagesPerLoad","componentDidMount","connectToChat","Notification","permission","requestPermission","componentWillUnmount","removeEventListener","checkConnection","localStorage","removeItem","clearInterval","close","WebSocket","onopen","addEventListener","onmessage","data","JSON","parse","Object","toConsumableArray","slice","reverse","refs","document","hidden","startBrowserNotification","startTabNotification","msg","readyState","send","stringify","start","end","setInterval","icon","body","Chat_MessagesList","Chat_WriteMessage","App","setItem","getItem","components_Chat","components_Login","Boolean","window","location","hostname","match","ReactDOM","render","components_App","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.59df6eb0.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAA7EAAAOxAGVKw4bAAACQElEQVRIiZWVP2iUQRDF31sOOY5DRCSIpBAri1SWVlZa2GpISgt7axtJISJWFjaWNtrYxFYF8Q+CIgaUaKWCilwhGCRIiPOzuN1z7+67u9yDj53dnX0zO9/MrJUBtCVdk7QsqSMp5fWkCrZDzfgBXLF9z/Z//Uwi4Krty5J+SvoNRCaUpEmkxYEkacH2rqQztl+MKrUjYgP4FRFLQCsiEpDKmGVFhIpc7beAS/SxVnO38pgkJWDL9vfsyTTE6Ah8yHKnVhzE17ZsRwnNvACKU0P/rJ4kYB7CoXl16yEHS6aUA1FnwBTyfcAT4HrOPkl6DdwZNVAOdID3wCfgwCwDEdEFNoG/wF3gYOZpA0uNN5gHtlUyS9KKpAfAgu0/tt/Vuq3qQJOnRyXdlNQtOnlsSVqsnDtp+zlw3vbbMaJJIQKWmQ/fgNO1s4N20HSDslbvzZCPAPclrZS9VEKkkfxtCt1eZPXD3i49rFUUJqXnUOOaLfdsX5S0nlIaWJtILumNpIeSutUPlu1WTsd2dfYzsJpSejnGAnQjYjMi9lQHWf9jRBARAK+AxSbd0V40i3sA25G/dUlnbX/NFX680UBTxky5wQ7QA25LWrXdi4iOpFuSLowdiIgSoi97CVGTI8CpXAs36vXyHkx7ChvREM76bRmg1EGo/2ikUYU5UAyMt2tJu8CO+ul4aN7ml3Esj9tNVndsP5Z0QtJTSVv0X7byzUJpftuSHo0ZsK2IWLO9Hzhn+/AkprrqR+Se7TVJz2r9f9bS+B8jtyFhAAAAAElFTkSuQmCC\"","import React, { Component } from 'react';\r\nimport './styles.css';\r\n\r\n\r\nclass Header extends Component {\r\n  logOutHandler = (e) => {\r\n    if (!e.target.classList.contains('chat-status')) this.props.logOut();   \r\n  }\r\n\r\n  render() {\r\n    const status = `chat-status chat-status_${this.props.chatStatus}`;\r\n    const greeting = 'Welcome to The Rolling Scopes School chat';\r\n    const content = this.props.user\r\n      ? <>Hello, <span className=\"welcome__name\">{this.props.user} </span>! {greeting} </>\r\n      : <>{greeting}<span className=\"welcome__login_mobile\">RSS chat</span> </>;    \r\n\r\n    return (\r\n      <header className=\"header\">\r\n        <h2 className=\"welcome header__welcome\">{content}</h2>\r\n        {this.props.user && (\r\n          <div onClick={this.logOutHandler} className=\"logout header__logout\">\r\n            <span className={status} title={'Chat status: ' + this.props.chatStatus}></span>Log out\r\n            <img className=\"logout__img\" src={require('./assets/images/logout.png')} alt=\"Log Out\" />            \r\n          </div>\r\n        )}              \r\n      </header> \r\n    )\r\n  }\r\n}\r\n\r\nexport default Header","import React, { Component } from 'react';\r\nimport Header from '../Header/index';\r\nimport './styles.css';\r\n\r\n\r\nclass Login extends Component {\r\n  state = {\r\n    value: ''\r\n  }\r\n\r\n  changeHandler = (e) => {\r\n    this.setState({value: e.target.value});\r\n  }\r\n\r\n  submitHandler = (e) => {\r\n    e.preventDefault();\r\n    if (this.state.value.replace(/ /g, '').length > 0) this.props.logIn(this.state.value);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <section className=\"login\">\r\n        <Header />\r\n        <form onSubmit={this.submitHandler} className=\"login__form\">        \r\n          <input \r\n            type=\"text\" \r\n            value={this.state.value} \r\n            onChange={this.changeHandler}\r\n            className=\"login__user\" \r\n            placeholder=\"Enter your username\" \r\n            maxLength=\"15\" \r\n            autoFocus \r\n            required \r\n          />          \r\n          <input type=\"submit\" value=\"Start chatting!\" className=\"login__enter\" />\r\n        </form>\r\n      </section>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Login","import React, { Component } from 'react';\r\nimport * as moment from 'moment';\r\nimport './styles.css';\r\n\r\n\r\nclass MessagesList extends Component { \r\n  getMessages(arr) {\r\n    if (arr.length === 0) return [];    \r\n\r\n    const messages = arr.map(i => {\r\n      return (\r\n        <div key={i.id} className=\"message messages-container__message\">\r\n          <span className=\"message__author\">{i.from}</span>\r\n          <span className=\"message__date\"> {moment(i.time).format('MMM Do, h:mm a')}</span>\r\n          <p className=\"message__text\">{i.message}</p>\r\n        </div>\r\n      );\r\n    });    \r\n    \r\n    return messages\r\n  }\r\n\r\n  messagesContainer = React.createRef();\r\n\r\n  updateScroll = () => {\r\n    this.messagesContainer.current.scrollTop = this.messagesContainer.current.scrollHeight;\r\n  }\r\n \r\n  buttonClickHandler = () => {\r\n    this.props.loadMoreMessages();\r\n  }\r\n\r\n  render() {\r\n    const refactoredMessages = this.getMessages(this.props.messages);\r\n    const button = this.props.loadMoreButton ? 'load-more_active' : 'load-more_disabled';\r\n\r\n    return (\r\n      <div ref={this.messagesContainer} className=\"messages-container\">\r\n        <button\r\n          onClick={this.buttonClickHandler} \r\n          className={'messages-container__load-more ' + button}>Load more\r\n        </button>\r\n        {refactoredMessages}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MessagesList","import React, { Component } from 'react';\r\nimport './styles.css';\r\n\r\n\r\nclass WriteMessage extends Component {\r\n  state = {\r\n    value: ''\r\n  }\r\n\r\n  changeHandler = (e) => {\r\n    this.setState({value: e.target.value});\r\n  }\r\n\r\n  keyDownHandler = (e) => {\r\n    const keyEnter = 13;\r\n    if (e.keyCode === keyEnter) {\r\n      e.preventDefault();\r\n      this.submitHandler(e);\r\n    }\r\n  }\r\n\r\n  submitHandler = (e) => {\r\n    e.preventDefault();\r\n    this.props.sendMessage(this.state.value);\r\n    this.setState({value: ''});\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <form onSubmit={this.submitHandler} className=\"user-message\">          \r\n        <textarea \r\n          value={this.state.value} \r\n          onChange={this.changeHandler}\r\n          onKeyDown={this.keyDownHandler}\r\n          className=\"user-message__textarea\" \r\n          rows=\"2\" \r\n          placeholder=\"Type your message ...\"\r\n        />          \r\n        <input type=\"submit\" className=\"user-message__send\" title=\"Send\" />\r\n      </form>\r\n    )\r\n  }\r\n}\r\n\r\nexport default WriteMessage","import React, { Component } from 'react';\nimport Header from '../Header/index';\nimport MessagesList from './MessagesList/index';\nimport WriteMessage from './WriteMessage/index';\nimport './styles.css';\n\n\nclass Chat extends Component {\n  state = {\n    allMessages: [],\n    lastMessages: [],\n    loadMoreButton: null,\n    chatStatus: 'offline'\n  }\n \n  webSocket = null;\n  autoReconnect = null;\n  tabNotification = null;\n  messagesPerLoad = 50;\n\n  componentDidMount = () => {\n    this.connectToChat();\n    if (Notification.permission === 'default') Notification.requestPermission();   \n  }\n\n  componentWillUnmount = () => { \n    this.webSocket.removeEventListener('close', this.checkConnection);\n    this.webSocket.removeEventListener('error', this.checkConnection);\n  } \n\n  logOut = () => {\n    localStorage.removeItem('user');\n    clearInterval(this.autoReconnect);\n    this.setState({chatStatus: 'offline'});\n    this.webSocket.close();\n    this.props.logOut();\n  }\n\n  connectToChat = () => {  \n    this.webSocket = new WebSocket('wss://wssproxy.herokuapp.com/');\n    \n    this.checkConnection();\n\n    this.webSocket.onopen = () => {    \n      this.setState({chatStatus: 'online'});\n      if (this.state.allMessages.length > this.messagesPerLoad) {\n        this.setState({loadMoreButton: 'active'});\n      }\n    }       \n\n    this.webSocket.addEventListener('close', this.checkConnection);\n\n    this.webSocket.addEventListener('error', this.checkConnection);    \n\n    this.webSocket.onmessage = (e) => { \n      const data = JSON.parse(e.data);         \n      if (this.state.allMessages.length === 0) this.setState({allMessages: data});\n      const allMessages = this.state.allMessages;\n      const lastMessages = this.state.lastMessages.length === 0 \n        ? [...allMessages.slice(0, this.messagesPerLoad).reverse()]\n        : [...this.state.lastMessages, ...data];\n        \n      this.setState({lastMessages});\n      if (allMessages.length > this.messagesPerLoad) this.setState({loadMoreButton: 'active'});     \n      if (this.refs.messagesContainer) this.refs.messagesContainer.updateScroll();\n      if (document.hidden) this.startBrowserNotification();\n      if (document.hidden && !this.tabNotification) this.startTabNotification();\n    };\n  }\n\n  sendMessage = (msg) => {\n    const message = {from: this.props.user, message: msg};\n    const webSocketIsOpened = this.webSocket.readyState === 1;\n    if (webSocketIsOpened) this.webSocket.send(JSON.stringify(message));    \n  }\n\n  loadMoreMessages = () => {\n    const start = this.state.lastMessages.length;\n    const end = this.state.allMessages.length > start + this.messagesPerLoad\n      ? start + this.messagesPerLoad\n      : this.state.allMessages.length; \n    const data = this.state.allMessages.slice(start, end).reverse();\n    this.setState({lastMessages: [...data, ...this.state.lastMessages]});\n    if (end === this.state.allMessages.length) this.setState({loadMoreButton: null});\n  } \n\n  checkConnection = () => {    \n    this.autoReconnect = setInterval(() => {\n      const webSocketIsOpened = this.webSocket.readyState === 1;\n\n      if (!webSocketIsOpened) {\n        this.setState({chatStatus: 'offline', allMessages: [], lastMessages: [], loadMoreButton: null});\n        clearInterval(this.autoReconnect);\n        this.connectToChat();        \n      } else {\n        clearInterval(this.autoReconnect);        \n      }\n    }, 2000);\n  }\n\n  startBrowserNotification = () => {    \n    if (Notification.permission === 'granted') {\n      new Notification('RSS chat', {\n      icon: 'https://yt3.ggpht.com/a/AGF-l7_XBv-WdGb5TSh9COVN7GK75B2NQrzAZmdhdw=s900-c-k-c0xffffffff-no-rj-mo',\n      body: 'Hey there! You have at least 1 unread message in The Rolling Scopes School chat.',\n      });     \n    }\n   }\n\n   startTabNotification = () => {\n    this.tabNotification = setInterval(() => {\n      document.title = document.title === 'RSS chat' ? 'New message!' : 'RSS chat';\n\n      if (!document.hidden) {\n        clearInterval(this.tabNotification);\n        document.title = 'RSS chat';\n        this.tabNotification = null;\n      }\n    }, 200);\n  }\n \n  render() {\n    return (      \n      <>\n        <Header user={this.props.user} logOut={this.logOut} chatStatus={this.state.chatStatus} />\n        <main className=\"chat-room\">\n          <section className=\"chat chat-room__chat\">\n            <MessagesList \n              messages={this.state.lastMessages} \n              ref=\"messagesContainer\" \n              loadMoreMessages={this.loadMoreMessages}\n              loadMoreButton={this.state.loadMoreButton}\n            />\n            <WriteMessage sendMessage={this.sendMessage} />        \n          </section>\n        </main>\n      </>\n    )\n  }\n}\n\nexport default Chat\n","import React, { Component } from 'react';\nimport Login from './Login/index';\nimport Chat from './Chat/index';\nimport './styles.css';\n\n\nclass App extends Component {\n  state = {\n    user: null\n  }\n\n  logIn = (user) => {\n    localStorage.setItem('user', user)\n    this.setState({user});\n  }\n\n  logOut = () => {\n    this.setState({user: null});    \n  }\n\n  render() {\n    return (\n      <>\n        {!this.state.user && !localStorage.getItem('user')\n          ? <Login logIn={this.logIn} user={this.state.user} />\n          : <Chat logOut={this.logOut} user={localStorage.getItem('user') || this.state.user} />\n        }\n      </>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App.jsx';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\nserviceWorker.unregister();\n"],"sourceRoot":""}